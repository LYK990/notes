# vue3 项目总结

**使用vite创建项目**:npm init @vitejs/app  项目名

vue3中所有功能都做成一个函数、在setup中使用组合api

ref一般专门给一个基本数据创建响应式对象，对象里面有一个value就是值（一般都是给基本数据创建响应式，一个数据）

reactive组合函数，创建响应式（传递对象）

在setup的内部不能使用this

computed计算完成返回的也是ref对象

监视的数据一定是响应式的数据

vue3的响应式通过proxy、reflect

setup中的生命周期写法（组合api）是最快的

webpack打包是全部打包，而vite是按需打包

全局配置需要在挂载之前使用

vue3没有.sync

vue2绑定的是value属性和input事件，而vue3绑定modelValue属性，绑定update：modelValue属性。v-model:count="count"

template 充当根元素，但不会生成额外的dom结构

vue2中，给组件绑定的事件都是自定义事件，想要原生Dom事件就要加.native。vue3中 给组件绑定的事件都是原生Dom事件，如果想要自定义事件 组件内通过emits声明接收事件emits：[]

vue3消除了$on $off $once 所以用不了全局事件总线

setup中传递的两个参数（props，context）props是一个对象，包含父组件传递给子组件的所有数据。context上都是方法

vite语法，使用import.meta.globEager代替require.context 自动导入文件

加上scoped就会自动删除未引用的样式

params传递参数的方式是`${params}`  --需要用到模板字符串

data传递的参数是data:{}

```
{
	"Print to vue": {
		"prefix": "vue1",
		"body": [
			"<template>",
			"  <div></div>",
			"</template>",
			"",
			"<script>",
			"export default {",
			"  name: '',",
			"}",
			"</script>",
			"",
			"<style lang=\"less\" scoped>",
			"",
			"</style>",
			""
		],
		"description": "快速创建vue单文件组件"
	}
}





{
	"Vue3代码模板": {
		"prefix": "vue2",
		"body": [
			"<template>",
			"",
			"</template>",
			"",
			"<script lang=\"ts\">",
			"import { defineComponent } from 'vue';",
			"export default defineComponent ({",
			"  name: '',",
			"})",
			"</script>",
			"",
			"<style lang=\"less\" scoped>",
			"",
			"</style>",
			""
		],
		"description": "vue3 + ts + setup"
	}
}

```

浏览器不能直接解析ts  tsc-v

 

```
extends: [
    'plugin:vue/essential', //vue2的eslint规则
    'standard'
  ],
```

渲染函数

组合式函数类型声明

组合式api  最好是值可追踪

npm i -D @types/node    找不到 import path from 'path'

css.modules  返回相应的模块对象

api 请求路径多出的/ ，系统会自动确认

eslint    overrides 针对部分文件配置规则

有了scoped才能使用样式穿透

scoped是通过postcss组件实现的，postcss会对对代码进行一次代码转换，scoped为组件上的类添加了data-   （自定义属性）

Modal样式穿透不生效，<div ref="yourModal">通过 :getContainer="() => $refs.yourModal"   

```
div :deep(.ant-modal-mask) {
  margin-top: 80px
}
```

setup语法糖默认引入值，，需要定义类型type

request不支持泛型， request.get.post 支持泛型

跨域cors 修改http协议头

plugins文件夹 配置ui框架 elementplus或者antdesign

setup语法糖

vw和vh是相对视口来说的

配置router

@click.native

时间戳处理缓存

object.freeze()可以冻结一个对象，一个被冻结的对象再也不能被修改；冻结了一个对象则不能向这个对象添加新的属性，不能删除已有属性。

vue-jss 用js写style样式

# 博客项目

.d.ts 

当我们在TS文件中需要引入外部库时，编译时是无法判断传入参数的类型的，所以我们需要在引入前加入一个声明文件来帮助ts判断类型。当然现在大部分库都自带有自己的声明文件，一般在**@types**目录下。

.mounte(#app)只需要挂在一次

配置了@之后还需要配置**路径提示**

在tsconfig.json中配置

```
{
  "compilerOptions": {
    "experimentalDecorators": true,
    "baseUrl": "./",
    "paths": {
      "@/*": [
        "src/*"
      ]
    },
  },
}
```

**npx**：

- npx 的原理很简单，就是运行的时候，会到`node_modules/.bin`路径和环境变量`$PATH`里面，检查命令是否存在。由于 npx 会检查环境变量`$PATH`，所以系统命令也可以调用。
- 除了调用项目内部模块，npx 还能避免全局安装的模块。

husky 的生命周期？？？

## 部署

ci/cd  

github令牌

Jest 不支持 ES6 语法，不能使用 import 引入，只支持 commonjs规范。

- jest 中有 babel-jest 组件，当我们使用 jest 命令时，会先去检测根目录或者开发环境中有没有安装 bebal 核心包，检测到后再去找 babelrc 文件，找到之后进行转换，转换后再执行用例测试。



**jest和ts-jest 和babel-jest要对应版本**

 .presets[0][1] must be an object, false, or undefined  

- .babelrc 和babel.config.js冲突

项目打包： 修改build 打包命令

```
"serve": "vite",
    "build": "vite build",
    "preview": "vite preview",
```

## 宝塔

Error: BT-Task service startup failed. 

- 修改云服务器的端口范围

node解药丢包问题 npm找不到cli文件

```
去node目录下：/node***(你的版本)/bin
shell> rm npm
shell> ln -s ../lib/node_modules/npm/bin/npm-cli.js ./npm
```

打开端口

pm2 安装需要软连接，，，软连接的文件在node的目录下

数据库配置后记得重启

## 前端项目

vite 热更新需要文件名称填写正确（大小写）

less/sass @mixin @include

axios返回来的数据会默认带一个data

promise需要返回一个结果（resolve，reject）才能显示到前端

服务端渲染 router 使用 import.meta.env.SSR ? createMemoryHistory() : createWebHistory(),

state要占位 index.html

window.location.href

css 预加载？

数据预取？？

```
 "babel": "babel src --out-dir dist --extensions \".ts\""
 
  // "@babel/cli": "^7.17.6",
    // "@babel/core": "^7.17.9",
    // "@babel/preset-env": "^7.16.11",
    // "@babel/preset-typescript": "^7.16.7",
```

- 404路由
  - 404 路由 必须要写到最后一项
  - vue3使用/:pathMatch(.*)

css 文件预加载

this.$router.options.routes    // 拿的是最开始注册的路由

router.getRoutes() // 拿取动态添加后的路由

websocket  blob使用 

meta seo优化

- 使用占位+state.routes 拿取路由中的meta的信息+模板字符串

## 后端项目

bearer token 、、、、这样写token才能生效  const reader = new FileReader();

### koa

koa2中的get传值通过request接受，但是接受的方法有两种query和querystring。

- query：返回的是格式化号的参数对象 {name ： ‘123}
- querystring：返回的是请求字符串  name=123&&age=123

ejs 模板引擎

## 需要添加的功能

### websocket

### 性能监控

### 测试

### 手写脚手架

# 博客项目迭代（nuxt3）

约定路由

动态路由

嵌套路由

**nuxt3功能未完善，暂时不使用nuxt3进行迭代**
